Winding_Cap_&_Tan_Delta_Measurement:
  extraction:
    description: Extracts capacitance and tan delta test data for the windings of a electrical transformer
    prompt: |
      You are given a base64-encoded image containing test reports of an electrical transformer (ex: Capacitance and Tan delta measurements).

      Your task is to:
      - Extract all visible text from the image accurately.
      - Convert the extracted data into structured Markdown format.
      - If test results appear both before and after the dielectric test section, only consider those that appear after.
      - Always use the results that appear after the dielectric test.
      - Respond only with extracted markdown text
  classification:
    description: Detects whether a page has relevant capacitance and tan delta test data.
    prompt: |
      Relevant content may appear for:
      - 2-winding transformers
      - 3-winding transformers
      - Auto transformers

      Mark the page as **Yes** if it includes any of the following:
      - Test results for winding combinations (e.g., HV/LV, HV/TV, CHL, CH, CL)
      - Measurement modes like UST, GST, GST-g, UST-A, GST-g-B, etc.
      - Measured values such as Capacitance (pF or nF), Tan Delta (%), Power Loss (Watts), or Test Current (mA)

      Mark the page as **No** if:
      - It does not contain any actual measurement results
      - It only includes general information, setup instructions, or non-capacitance test data (e.g., IR, PI, Bushing, turns ratio)

      Return only one of the following:
      - Yes
      - No

oil_testing:
  extraction: 
    description: Extracts DGA and oil test results from transformer oil reports
    prompt: |
      You are given a base64-encoded image containing oil test reports of an electrical transformer (ex: Oil test results).

      Your task is to:
      - Extract all visible transformer oil test values.
      - Include test results for DGA (Dissolved Gas Analysis), Oil Quality Parameters, Furan Analysis and sampling metadata(like Position, Sampled By, Sampling Method etc.).
      - Convert the extracted data into structured Markdown format
  classification:
    description:
    prompt:      

search_pages:
  prompt: | 
          You are an intelligent and strict transformer test report evaluator. You are analyzing a **single page** of a 
          transformer test report.
          
          Your task is to evaluate whether structured test data is **actually present** for each of the following test 
          types, based on strict definitions.
          
          ---
          
          ### Test Criteria for `"Yes"` (Data Present):
          
          #### 1. Oil Testing
          Mark the page as **Yes** if it contains any of the following:
          - DGA (Dissolved Gas Analysis) - Hydrogen, Methane, Ethane, Ethylene, Acetylene, CO, CO₂, O₂, N₂, TDCG, etc.
          - Furan Analysis - 2-Furaldehyde, 5-Hydroxymethyl-2-furaldehyde, 5-Methyl-2-furaldehyde, 2-Acetylfuran, 2-Furfuryl alcohol, Total Furans.
          - Oil Quality Parameters - Appearance, Density, Flash Point, Water Content, Neutralisation Value, Interfacial Tension, Dielectric Dissipation Factor, Resistivity, Breakdown Voltage.
          - Estimated DP Value
          
          Mark the page as **No** if:
          - It includes other measurements data like(e.g., winding resistance, Winding Tan Delta and Capacitance measurements, Turns ratio etc.)
          - It includes only setup instructions or test procedures
          - It does not contain any actual measurement results.
          
          #### 2. Turns Ratio Test
          Mark the page as **Yes** if it includes any of the following:
          - Tap numbers (TAPNO)
          - Measured or calculated ratio values
          - Phase-wise data (e.g., 1U, 1V, 1W or 2U, 2V, 2W)
          - Winding combinations like HV/LV, HV/IV
          
          Mark the page as **No** if:
          - "Turns ratio was checked"
          - "Ratio within limits"
          
          #### 3. Winding Resistance
          Mark the page as **Yes** if it includes any of the following:
          - Resistance values (e.g., in mΩ or Ω)
          - Phase-wise data (1U, 1V, 1W or R, Y, B)
          - TAP positions or structured measurement format
          
          Mark the page as **No** if:
          - "Winding resistance measured"
          - "Values acceptable"

          #### 4. Winding Tan Delta and Capacitance

          Mark the page as **Yes** if it includes any of the following:
          - Measurement of capacitance and tan delta(dissipation factor).
          - Test results for winding combinations (e.g., HV/LV, HV/TV, CHL, CH, CL)
          - Test modes like UST, GST, GST-g, UST-A, UST-B, UST A+B, GST-g-A, GST-g-B, GST-g A+B etc.
          - Measured values such as Capacitance (pF or nF), Tan Delta (% or Abs), Power Loss (Watts), or Test Current (mA)

          Mark the page as **No** if:
          - It includes other measurements data like (bushing Winding Tan Delta and Capacitance measurements, Turns ratio, Winding resistance etc.)
          - It does not contain any actual measurement results.

          Return only one of the following:
          - Yes
          - No
                                                                                                
          ---
          
          ### Output Instructions:
          - Independently evaluate each test.
          - Respond with `"Yes"` only if clear, structured test data is present for that specific test.
          - Respond with `"No"` if data is missing or only vaguely mentioned.
          - Do **not** infer. Think like a compliance inspector — if it’s not clearly measured and structured, it’s `"No"`.
          
          Return your result in this exact JSON format:
          
          ```json
          {
            "Oil Testing": "Yes" or "No",
            "Turns Ratio": "Yes" or "No",
            "Winding Resistance": "Yes" or "No",
            "Winding Tan Delta & Capacitance": "Yes" or "No"
          }

turns_ratio:
  extraction:
    description: Extract values and associated test methods for transformer parameters Tap No,Calculated Ratio/Actual Ratio,measured ratio,U,V,W
    prompt: |
      You are given a base64-encoded image containing test reports of an electrical transformer (ex: Measurement of Voltage Ratio ,Turns Ratio Test).

      Your task is to:
      - Extract all visible text from the image accurately.
      - Convert the extracted data into structured Markdown format.

  classification:
    description: |
      Identify whether the report corresponds to a 1-Phase (1-PH) or 3-Phase (3-PH) Auto Transformer.
      Use the following classification logic:
      - If the report table includes U, V, W phase values and shows measurements for each phase: it's a 3-PH Auto Transformer.
      - If the table contains only Calculated Ratio, Measured Ratio, and Ratio Deviation columns, and uses labels like HV (1.1-N) and IV (2.1-N): it's a 1-PH Auto Transformer.

    prompt: |
      You are an information extraction assistant specialized in analyzing and processing electrical test reports of transformers,
      particularly focusing on Measurement of Voltage Ratio and Turns Ratio Test.

      You will receive OCR-extracted text content from a PDF test report related to transformer turns ratio testing.
      Your task is to extract accurate test values associated with the following parameters and present them in a structured JSON format.

      Required fields:
      - Tap No
      - Calculated Ratio / Actual Ratio
      - Measured Ratio
      - U, V, W (for 3-PH)
      - HV/IV, IV/LV, HV/LV (for 1-PH)

      Transformer Type Identification (Auto-Transformer Type Detection):
      - 3-PH Auto Transformer if:
        • Table includes U Phase, V Phase, W Phase values.
        • Tap-wise measurements are shown for each phase separately.
      - 1-PH Auto Transformer if:
        • Only Calculated Ratio, Measured Ratio, and Ratio Deviation columns are present.
        • Voltages are labeled as HV (1.1-N) and IV (2.1-N).
        
        In HV/IV , IV/LV and HV/LV modes if there contains any TAPNO contains no value consider it a None. 

      Output Rules:
      1. If a value is missing, not present, or illegible, set its "value" to None.
      2. Use exact parameter names as provided.
      3. Do not include extra fields or modify parameter names.
      4. Output the results in structured JSON format only.

      Return only one of the following values as classification:
      - "Yes"
      - "No"
